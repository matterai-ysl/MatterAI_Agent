# MatterAI Agent Nginx 配置示例
# 子路径部署：/agent/

server {
    listen 80;
    server_name 47.99.180.80;  # 或您的域名

    # MatterAI Agent 前端 - 部署在 /agent/ 路径下
    location /agent/ {
        alias /path/to/matterai/build/;  # 修改为实际的 build 目录路径
        index index.html;

        # SPA 路由支持 - 所有未找到的文件都返回 index.html
        try_files $uri $uri/ /agent/index.html;

        # 静态资源缓存
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }

    # API 代理（如果后端在同一服务器）
    location /agent/api/ {
        proxy_pass http://localhost:9000/;  # 后端服务地址
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # 文件上传服务代理
    location /file/ {
        proxy_pass http://47.99.180.80/file/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}